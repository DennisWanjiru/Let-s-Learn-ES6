<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Nesting Promises</title>
</head>
<body>
	<script>
		const posts = [
			{
			"author": "Creez",
			"id": 1,
			"title": "sunt aut facere repellat provident occaecati excepturi optio reprehenderit",
			"body": "quia et suscipit\nsuscipit recusandae consequuntur expedita et cum\nreprehenderit molestiae ut ut quas totam\nnostrum rerum est autem sunt rem eveniet architecto"
			},
			{
			"author": "Wes Bos",
			"id": 2,
			"title": "qui est esse",
			"body": "est rerum tempore vitae\nsequi sint nihil reprehenderit dolor beatae ea dolores neque\nfugiat blanditiis voluptate porro vel nihil molestiae ut reiciendis\nqui aperiam non debitis possimus qui neque nisi nulla"
			},
			{
			"author": "Zara Hassan",
			"id": 3,
			"title": "ea molestias quasi exercitationem repellat qui ipsa sit aut",
			"body": "et iusto sed quo iure\nvoluptatem occaecati omnis eligendi aut ad\nvoluptatem doloribus vel accusantium quis pariatur\nmolestiae porro eius odio et labore et velit aut"
			},
		]

		const authors = [
			{
			"id": 1,
			"name": "Creez",
			"username": "Bret",
			"email": "Sincere@april.biz"
			},

			{
			"id": 2,
			"name": "Wes Bos",
			"username": "Wes",
			"email": "Sincere@gnma.biz"
			},

			{
			"id": 3,
			"name": "Zara Hassan",
			"username": "Zara",
			"email": "Sincere@zarril.biz"
			}
		]

		function getPostById(id) {
			return new Promise((res, rej) => {
				const post = posts.find(post => post.id === id);

				if (post) {
					res(post)
				} else {
					rej("No post was found")
				}
			});
		}

		function hydrateAuthor(post) {
			return new Promise((res, rej) => {
				const authorDetails = authors.find(person => person.name === post.author);
				if (authorDetails) {
					res(authorDetails)
				} else {
					rej("No author found!");
				}
			})
		}

		getPostById(3).then(post => {
			console.log(post);
			return hydrateAuthor(post)
		}).then(post => {
			console.log(post)
		});
	</script>
</body>
</html>













